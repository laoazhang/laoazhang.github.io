<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>HTML5 Form Validation のカスタマイズ &#8211; Laoazhang! Blog</title>
<meta name="description" content="">
<meta name="keywords" content="">

<!-- Twitter cards -->
<meta name="twitter:site"    content="@laoazhang">
<meta name="twitter:creator" content="@laoazhang">


<meta name="twitter:card"  content="summary">
<meta name="twitter:image" content="https://laoazhang.cn/assets/images/avatar.jpg">



<meta name="twitter:title"   content="HTML5 Form Validation のカスタマイズ">



<meta name="twitter:description" content="If you only do what you can do, you will never be more than you are now">


<!-- end of Twitter cards -->

<!-- Web Monetization | Interledger -->
<meta name="monetization" content="$ilp.uphold.com/6NxbkHNq9N84">
<meta name="monetization" content="$twitter.xrptipbot.com/laoazhang" />

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="HTML5 Form Validation のカスタマイズ">
<meta property="og:description" content="If you only do what you can do, you will never be more than you are now">
<meta property="og:url" content="https://laoazhang.cn/blog/2012/12/01/html5-form-validation-jp/">
<meta property="og:site_name" content="Laoazhang! Blog">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="I-NDFBl5t1P9fqHmRNZhwu8OOHmwW4HADPiOr_r16cE">



<link rel="canonical" href="https://laoazhang.cn/blog/2012/12/01/html5-form-validation-jp/">
<link href="https://laoazhang.cn/feed.xml" type="application/atom+xml" rel="alternate" title=" Feed">


<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,400,600,700' rel='stylesheet' type='text/css'>

<!-- For all browsers -->
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://laoazhang.cn/assets/js/vendor/modernizr/modernizr.js"></script>

<!-- Icons -->

<!-- favicon -->
<link rel="shortcut icon" href="https://laoazhang.cn/assets/ico/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://laoazhang.cn/assets/ico/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://laoazhang.cn/assets/ico/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://laoazhang.cn/assets/ico/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://laoazhang.cn/assets/ico/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="https://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="https://laoazhang.cn/index.html">Laoazhang.cn</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="https://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="https://laoazhang.cn/about" >About</a></li>
		        
				<li><a href="https://laoazhang.cn/blog" >Archive</a></li>
		        
				<li><a href="https://laoazhang.cn/presentations" >Preso</a></li>
		        
				<li><a href="https://laoazhang.cn/doodles" >Sketch Notes</a></li>
		        
				<li><a href="https://codepen.io/laoazhang" target="_blank">My CodePen</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="https://laoazhang.cn/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


<header role="banner">
</header>

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="https://schema.org/Blog">
  <div class="article-author-side">
  	<img src="https://laoazhang.cn/assets/images/avatar.jpg" class="bio-photo" alt="laoazhang">
    <h3>laoazhang</h3>
<p class="bio">An Open Web advocate and front-end engineer, who loves everything mobile, and writes about HTML5, CSS, JS, UX, tech events, gadgets, etc. She unintentionally got 15min of fame by creating The HTTP Status Cats. Also, the opinions expressed here are solely her own and do not express the views or opinions of my employer.</p>
<a href="https://twitter.com/laoazhang" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="https://facebook.com/laoazhang" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>

<a href="https://linkedin.com/in/laoazhang" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="https://instagram.com/laoazhang" class="author-social" target="_blank"><i class="icon-instagram"></i> Instagram</a>
<a href="https://github.com/laoazhang" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>




        <p class="license">
      
    </p>

  </div>

  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      
      <time datetime="2012-12-01T00:00:00-08:00" itemprop="datePublished"><i class="icon-calendar"></i> December 01, 2012</time>

      
      <h1 itemprop="name">HTML5 Form Validation のカスタマイズ</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->

    <div class="article-wrap" itemprop="text">
      <p><em>Note: This article is written in Japanese for <a href="http://www.adventar.org/calendars/27" target="_blank">HTML5 Advent Calendar 2012</a>. If you’d like to read this article in English, you can read the original post I wrote on <a href="/blog/2012/11/21/html5-form-validation/">November 21</a>. (The article was originally written for: <a href="http://www.developer.nokia.com/Blogs/Code/2012/11/21/creating-a-custom-html5-form-validation/" target="_blank">Nokia Code Blog</a>). 
Thank you.</em></p>

<hr />

<p>師走です。早いものですね。さて、<a href="http://www.adventar.org/calendars/27" target="_blank">HTML5 Advent Calendar 2012</a> ２日目を書かせてもらうことになりました。元々この記事は <a href="http://www.developer.nokia.com/Blogs/Code/2012/11/21/creating-a-custom-html5-form-validation/" target="_blank">Nokia Code Blog</a> の一記事として私が１１月２１日に書いたものなのですが、クロスポスト可ということなので、せっかくですので今回はその日本語版として記事にしてみました。というわけで、HTML5 Form Validation CSS3、ウェブフォント、JavaScript を使ったカスタマイズ方法について書いています。</p>

<p>以前までならばユーザの入力フィールドの検証（バリデーション）は JavaScript もしくはサーバサイドで専用のロジックを書かねばばらなかったわけですが、HTML5 からは仕様に組み込まれるようになったために非常に簡単にできるようになりました。実装されるようになってかれこれ１年ほど経っているのですがその間に Internet Explorer など、サポートされるブラウザも増えてきました。まずこのバリデーションカスタム化についてのこの記事を読む前に、必須課目として HTML5 から新たに加わったフォームのインプット要素についての理解が必要ですので、基本を<a href="http://www.html5.jp/tag/elements/input.html" title="Form input 要素" target="_blank">ここ</a>や<a href="http://ascii.jp/elem/000/000/693/693899/" title="HTML5でこんなに変わったinput要素を徹底解説" target="_blank">ここ</a>などでおさらいをしておいてください。さらにバリデーションについての全般的な内容については、白石 俊平さんの書かれた、&lt;a href=”http://www.atmarkit.co.jp/fwcr/design/benkyo/html5appli09/01.html”　titile=”HTML5で仕様になった入力値チェック＋便利な3Tips” target=”_blank”&gt;「HTML5で仕様になった入力値チェック＋便利な3Tips」&lt;/a&gt;が非常にわかりやすいと思います。</p>

<h2 id="フォームバリデーションの基本">フォームバリデーションの基本</h2>

<p>例えば必須入力のフィールドが空の状態で送信された場合の検証。これは HTML5 では <code class="language-plaintext highlighter-rouge">&lt;input&gt;</code> に <code class="language-plaintext highlighter-rouge">required</code> 属性を加えるだけで、下のように非常に簡単に書くことができます。</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form&gt;</span> 
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">required</span><span class="nt">&gt;</span> 
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"Submit"</span><span class="nt">&gt;</span> 
<span class="nt">&lt;/form&gt;</span> 
</code></pre></div></div>

<p>単純な<a title="JS Fiddle" href="http://jsfiddle.net/girlie_mac/X6Uuc/" target="_blank">デモ</a>を書いたので試してみてください。仕様がサポートされているブラウザ上でフィールドを空のまま送信するとエラーメッセージが表示、もしくはエラーを示す UI が現れます。<br />
下のスクリーンショットは、左がデスクトップ IE10 （英語版）のデフォルト、右が IE10 モバイルの UI です。</p>

<p><img style="vertical-align: top" src="/assets/images/articles/2012/12/screenshot-basic-ie10.png" alt="Basic form validation (IE10)" width="255" height="125" /> <img style="vertical-align: top;margin: 9px 0 0 20px" src="/assets/images/articles/2012/12/screenshot-basic-ie10m.png" alt="Basic form validation (IE10 Mobile)" width="250" height="68" /></p>

<p>IE10 モバイル版では、エラーメッセージの吹き出しが表示されず、空フィールドの枠が赤く表示されただけの仕様になっているのですが、そのフィールドが focus された状態でバーチャルキーボードが現れるので、ユーザビリティは損なわれていないようです。</p>

<p>このメッセージや吹き出しの UI は、ブラウザや環境言語によって異なります。下の画像は日本語版の Chrome から。<br />
<img src="/assets/images/articles/2012/12/screenshot-basic-chrome-jp.png" alt="Basic form validation (Chrome JP)" width="301" height="96" /></p>

<p>それでは、これから 1) パターンマッチング、2) CSS3 でのビジュアル効果、3) カスタムのエラーメッセージ設定、を使ってフルカスタマイズしてみましょう。</p>

<h2 id="パターンマッチング">パターンマッチング</h2>

<p><code class="language-plaintext highlighter-rouge">pattern</code> 属性では要素の値を正規表現と照合することができます。下は、6~12 文字のアルファベットと数字、句読点を含む文字セットを一致させる正規表現を使った例です。</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form&gt;</span> 
  <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"username"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">pattern=</span><span class="s">"[a-zA-Z0-9_-]{6,12}"</span> <span class="na">autofocus</span> <span class="na">required</span><span class="nt">&gt;</span> 
  <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"submit"</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"create"</span><span class="nt">&gt;</span> 
<span class="nt">&lt;/form&gt;</span> 
</code></pre></div></div>

<p><a href="http://jsfiddle.net/girlie_mac/qe62z/" target="_blank"> <code>pattern</code> 属性のデモコード</a>を試してみてください。わざと無効になるように３桁の数字などを入力てみましょう。</p>

<h2 id="css3-ユーザインターフェイスセレクタ">CSS3 ユーザインターフェイスセレクタ</h2>

<p>CSS ではいくつかの、UI 要素状態を表す UI セレクタ（疑似クラスや疑似要素）があります。その例として、<code class="language-plaintext highlighter-rouge">:valid</code>, <code class="language-plaintext highlighter-rouge">invalid</code>, <code class="language-plaintext highlighter-rouge">in-range</code>, <code class="language-plaintext highlighter-rouge">out-of-range</code>, <code class="language-plaintext highlighter-rouge">required</code>, <code class="language-plaintext highlighter-rouge">optional</code>, <code class="language-plaintext highlighter-rouge">read-only</code>, <code class="language-plaintext highlighter-rouge">read-write</code> が挙げられます。<br />
これを使って、入力の有効/無効状態を赤と緑の色別に表示するようにしてみましょう。</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:valid</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">green</span><span class="p">;</span>
<span class="p">}</span> 
<span class="nd">:invalid</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div></div>

<p>入力値が正しい形式に一致する時は緑、値が無効なときは入力値が赤で表示されます。<a href="http://jsfiddle.net/girlie_mac/Db7kg/" target="_blank">サンプル</a>で試してみましょう。</p>

<h2 id="ウェブフォントアイコンを使う">ウェブフォントアイコンを使う</h2>

<p>この上さらに、チェックマークのついたアイコンを表示させてみましょう。せっかくですので画像アイコンを使わず CSS3 をフル活用してウェブフォントを使った応用をやってみましょう。<br />
<img src="/assets/images/articles/2012/12/screenshot-valid-fonticon.png" alt="using webfont icon" width="269" height="73" /></p>

<p>ここでまた必須課目です！ここではちょっと変わった活用をしてみたいので、CSS3 ウェブフォントについてよくわからないという方は必ず先におさらいしておいてください。</p>

<p>さて、フリーのウェブフォントはいろいろあるのですが、ここでは <a href="http://icomoon.io/" target="_blank">IcoMoon</a> が配布している <em>Iconic</em> という絵フォントを使います。このサイトの、<a href="http://icomoon.io/app/" target="_blank">IcoMoon App</a> を使うとなんと自分の必要なものだけを選べ、それを軽量パッケージ化してくれるのです。</p>

<p>一旦フォントセットを作ったら、それを読み込む <code class="language-plaintext highlighter-rouge">@font-face</code> 規則を使って CSS を作成します。</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@font-face</span> <span class="p">{</span>
    <span class="nl">font-family</span><span class="p">:</span> <span class="s2">'iconic'</span><span class="p">;</span>
    <span class="nl">src</span><span class="p">:</span> <span class="sx">url('webfonts/iconic.eot')</span><span class="p">;</span>
    <span class="nl">src</span><span class="p">:</span> <span class="sx">url('webfonts/iconic.eot?#iefix')</span> <span class="n">format</span><span class="p">(</span><span class="s2">'embedded-opentype'</span><span class="p">),</span>
         <span class="sx">url('webfonts/iconic.svg#iconic')</span> <span class="n">format</span><span class="p">(</span><span class="s2">'svg'</span><span class="p">),</span>
         <span class="sx">url('webfonts/iconic.woff')</span> <span class="n">format</span><span class="p">(</span><span class="s2">'woff'</span><span class="p">),</span>
         <span class="sx">url('webfonts/iconic.ttf')</span> <span class="n">format</span><span class="p">(</span><span class="s2">'truetype'</span><span class="p">);</span>
    <span class="nl">font-weight</span><span class="p">:</span> <span class="nb">normal</span><span class="p">;</span>
    <span class="nl">font-style</span><span class="p">:</span> <span class="nb">normal</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>疑似クラス <code class="language-plaintext highlighter-rouge">:valid</code> と、疑似要素 <code class="language-plaintext highlighter-rouge">::after</code> (もしくは <code class="language-plaintext highlighter-rouge">::before</code>)を一緒に使うと入力値が無効であった時にエレメントの後ろ（または前に）コンテントを表示するとこができます。では後ろにフォントアイコンを表示させてみましょう。</p>

<p><code class="language-plaintext highlighter-rouge">input</code> 要素の後にアイコンを表示するのだから、<code class="language-plaintext highlighter-rouge">input</code> 要素と疑似クラスと疑似要素を全部一気につなげて <code class="language-plaintext highlighter-rouge">input:valid::after</code> としたいところですが、ちょっと待って！この <code class="language-plaintext highlighter-rouge">input</code> 要素 DOM にはドキュメントツリーコンテントがないので疑似要素をくっつけることができないのです。なのでここでは適当な要素、 <code class="language-plaintext highlighter-rouge">span</code> を使うことにします。</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"username"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">pattern=</span><span class="s">"[a-zA-Z0-9_-]{6,12}"</span> <span class="na">autofocus</span> <span class="na">required</span><span class="nt">&gt;</span>
<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"icon-validation"</span> <span class="na">data-icon=</span><span class="s">"&amp;#xe000"</span><span class="nt">&gt;&lt;/span&gt;</span> 
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">data-*</code> 属性を使って絵フォント値を指定してみましょう。ここでは <code class="language-plaintext highlighter-rouge">span</code> 中に <code class="language-plaintext highlighter-rouge">data-icon</code> というカスタム属性を作成して IcoMoon で作成した特定のフォントのキャラクター値を指定しています。</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">:valid</span> <span class="o">+</span> <span class="nc">.icon-validation</span><span class="nd">::before</span> <span class="p">{</span>
    <span class="nl">content</span><span class="p">:</span> <span class="n">attr</span><span class="p">(</span><span class="n">data-icon</span><span class="p">);</span>
    <span class="nl">color</span><span class="p">:</span> <span class="no">green</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>簡単な CSS ではありますがこの数行にはいろいろな意味を含んでいます。まず、<code class="language-plaintext highlighter-rouge">+</code> は Adjacent Sibling （隣接）セレクタ、直後に後続する要素のみ指定しています。そして疑似要素のコンテントは定義されたカスタムデータ属性を使っています。この HTML5 カスタムデータ属性 (<code class="language-plaintext highlighter-rouge">data-*</code>) は、DOM ステートを保ったまま少量のプライベートデータを保存できるのです。確かに絵フォントキャラクターを <code class="language-plaintext highlighter-rouge">::before</code> 疑似要素の、<code class="language-plaintext highlighter-rouge">content</code> プロパティで直接使うことはできるのですが、ルー大柴みたいに言ってみれば、この <code class="language-plaintext highlighter-rouge">data-*</code> を使ってデータバインディグする方法がセマンティックでベターだと思うぜ☆</p>

<h2 id="カスタムエラーの設定">カスタムエラーの設定</h2>

<p>エラーメッセージの表示をカスタマイズするには大まかに２つの方法があります。</p>

<p>では簡単な方法から。これは <code class="language-plaintext highlighter-rouge">title</code> 属性を使ったインラインテキストを表示させる方法で、ここで指定されたテキストはデフォルトのエラーメッセージに下に表示されます。したの画像は Opera 12 です。<br />
<img class="alignnone size-full wp-image-329" src="/assets/images/articles/2012/12/screenshot-custom-opera12.png" alt="" width="500" height="150" /></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"username"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">pattern=</span><span class="s">"[a-zA-Z0-9_-]{6,12}"</span> <span class="na">autofocus</span> <span class="na">required</span> 
       <span class="na">title=</span><span class="s">"must be alphanumeric in 6-12 chars"</span><span class="nt">&gt;</span> 
</code></pre></div></div>

<p><a href="http://jsfiddle.net/girlie_mac/vuP4n/">このデモ</a>で自分で試してみてください。</p>

<p>フルカスタム仕様には、ちょっとだけ DOM スクリプティング（ってか JavaScript)を使います。 メッセージを含む DOM ノードの <code class="language-plaintext highlighter-rouge">validationMessage</code> プロパティ値を変更することによって <code class="language-plaintext highlighter-rouge">setCustomValidity</code> メソッドでカスタムメッセージを指定することができます。</p>

<p>フォーム要素ノード上で <code class="language-plaintext highlighter-rouge">checkValidity</code> メソッドが入力フィールドを検証した際にその値が無効であった場合、そのノードで <code class="language-plaintext highlighter-rouge">invalid</code> イベントが発生されます。なので、ここでイベントリスナを登録してそこで入力フィールドが空もしくはミスマッチかを調べてやればよいのです。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">input</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">invalid</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">validity</span><span class="p">.</span><span class="nx">valueMissing</span><span class="p">){</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nf">setCustomValidity</span><span class="p">(</span><span class="dl">"</span><span class="s2">PLZ CREATE A USERNAME, YO!</span><span class="dl">"</span><span class="p">);</span> 
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">input</span><span class="p">.</span><span class="nx">validity</span><span class="p">.</span><span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nf">setCustomValidity</span><span class="p">(</span><span class="dl">"</span><span class="s2">U R DOIN IT WRONG!</span><span class="dl">"</span><span class="p">);</span> 
    <span class="p">}</span> 
<span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></div></div>

<p>下の画像が Firefox 16 での結果です。<br />
<img src="/assets/images/articles/2012/12/screenshot-custom-ff16.png" alt="" width="250" height="121" /></p>

<p><code class="language-plaintext highlighter-rouge">validity</code> プロパティは、 <code class="language-plaintext highlighter-rouge">value</code>、 <code class="language-plaintext highlighter-rouge">valueMissing</code>、 <code class="language-plaintext highlighter-rouge">typeMismatch</code> など、要素のバリデーション状態を boolean で示すプロパティを含む <code class="language-plaintext highlighter-rouge">ValidityState</code> オブジェクトを返します。（<code class="language-plaintext highlighter-rouge">ValidityState</code> についてもっと詳しく学びたい方のためにブログの最後にリンクを貼っておきます。）</p>

<p><a href="http://jsfiddle.net/girlie_mac/te3Qd/" target="_blank">このデモ</a>で実際にどう動くか見てみてください。コードを fork して是非自分でもほかの <code class="language-plaintext highlighter-rouge">ValidityState</code> オブジェクト状態がどういったふうに動くのか確かめてみてください。<br />
JavaScript と <code class="language-plaintext highlighter-rouge">title</code> 属性を両方使うことも可能です。これも自分で試してみてください。</p>

<h2 id="put-them-all-together">Put Them All Together</h2>

<p>さてここで<a href="https://dl.dropbox.com/u/1330446/validation.html" target="_blank">フルまとめデモ</a>を見てみましょう。Windows Phone 8 メトロ UI をちょっとまねたスタイルにしてみました。なのでモバイルからもぜひためしてみてね。</p>

<p><a href="https://dl.dropbox.com/u/1330446/validation.html"><img src="/assets/images/articles/2012/12/form-val-demo-qr.png" alt="Demo URL QR" width="128" height="127" align="right" /></a><br />
<strong>http://goo.gl/xKj0X</strong></p>

<p>実は私が試してみたところ IE 10 にはちょっとした gotcha があるのです。まあ、IE なので落とし穴があって当たり前か、とも思うのですが。このデモの場合、どうもフィールドが unfocus するまでチェックマークアイコンが表示されないようなのです。テストした他のブラウザでは入力値が有効になり次第（このデモの場合、文字数が６文字になり次第）アイコンがちゃんと表示されます。</p>

<p>で、下の画像は Windows Phone 8 上の IE10 Mobile の実際のスクリーンショットです。</p>

<p><img src="/assets/images/articles/2012/12/screenshot-ie10m.png" alt="screenshot of IE10 mobile" width="600" height="410" /></p>

<p>ちょっと端折った箇所もあるのでわかりにくい所もあったかもしれませんが、これからのフォーム UX の参考になっていただけえたらうれしいです。あ、あと最後に。フォールバックについて書きませんでしたが、バリデーションがすべてのブラウザに実装されているわけではないので実際は送信されたデータはサーバサイドでもしっかり管理することが大切です。当然といえば当然なのですが念のため。</p>

<p>ではよいお年を（ってちょっとまだ早いか）。</p>

<h2 id="learn-more">Learn More</h2>

<p>日本語</p>

<ul>
  <li>MSDN: <a href="http://msdn.microsoft.com/ja-jp/library/ie/hh673544(v=vs.85).aspx" target="_blank">フォーム (Windows)</a></li>
  <li>Adobe: <a href="http://www.adobe.com/jp/devnet/dreamweaver/articles/html5pack_css3_part4.html" target="_blank">HTML5&#038;CSS3入門 第4回 @font-face（ウェブフォント）の利用</a></li>
</ul>

<p>英語</p>

<ul>
  <li>WebPlatform.org: <a href="http://docs.webplatform.org/wiki/guides/html5_form_features" target="_blank">HTML5 form features</a></li>
  <li>Dive Into HTML5: <a href="http://diveintohtml5.info/forms.html" target="_blank">A Form of Madness</a></li>
  <li>W3C: <a href="http://www.w3.org/TR/css3-fonts/" target="_blank">CSS Fonts Module Level 3</a></li>
  <li>Six Revisions: <a href="http://sixrevisions.com/css/font-face-guide/" target="_blank">The Essential Guide to @font-face</a></li>
  <li>WebPlatform.org: <a href="http://docs.webplatform.org/wiki/css/selectors/pseudo-elements" target="_blank">Pseudo-elements</a></li>
  <li>MSDN: <a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh466212.aspx" target="_blank">ValidityState object</a></li>
</ul>


      <hr>

      <!-- Pagination -->
      <ul class="pagination">
	      
	        <li class="prev"><a href="/blog/2012/11/21/html5-form-validation/" rel="prev">&larr; Creating A Custom HTML5 Form Validation</a></li>
	      
	      
	        <li class="next"><a href="/blog/2013/01/09/how-to-enable-wp8-emulator-on-mac/" rel="next">How to Enable WP8 Emulator on Mac &rarr;</a></li>
	      
	  </ul>

      <hr style="visibility:hidden;">

      <!-- Categories -->
      
	  <ul class="categories">
	      <li><i class="icon-drawer"></i></li>
	      

	      
		    
		    	<li data-size="27"><a href="/categories/#CSS">
		    		CSS
		    	</a></li>
		    
		    	<li data-size="15"><a href="/categories/#Firefox">
		    		Firefox
		    	</a></li>
		    
		    	<li data-size="21"><a href="/categories/#HTML5">
		    		HTML5
		    	</a></li>
		    
		    	<li data-size="7"><a href="/categories/#IE">
		    		IE
		    	</a></li>
		    
		    	<li data-size="3"><a href="/categories/#Japanese">
		    		Japanese
		    	</a></li>
		    
		    	<li data-size="12"><a href="/categories/#Mobile">
		    		Mobile
		    	</a></li>
		    
		    	<li data-size="17"><a href="/categories/#Nokia">
		    		Nokia
		    	</a></li>
		    
		    	<li data-size="12"><a href="/categories/#Opera">
		    		Opera
		    	</a></li>
		    
		    	<li data-size="11"><a href="/categories/#UI/UX">
		    		UI/UX
		    	</a></li>
		    
		    	<li data-size="33"><a href="/categories/#WebKit">
		    		WebKit
		    	</a></li>
		    
		  
	      

	  </ul>
	  

	  <!-- Disqus -->
	      <div id="disqus_thread" style="margin-top: 3em"></div>
		    <script type="text/javascript">
		        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		        var disqus_shortname = 'laoazhang'; // required: replace example with your forum shortname
				

		        /* * * DON'T EDIT BELOW THIS LINE * * */
		        (function() {
		            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		        })();
		    </script>
		    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">

    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<footer>
  <small class="copyright">
    <span>&copy; 2024 laoazhang. Powered by <a href="http://jekyllrb.com">Jekyll</a> with modified <em>Minimal Mistakes</em> theme. Hosted on <a href="http://github.com">Github</a>.
  </small>
</footer>

<script src="https://laoazhang.cn/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-2635445-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<script>

</script>

</body>
</html>
