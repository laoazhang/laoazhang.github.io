<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Filtrous.js Photo Manipulation Library &#8211; Laoazhang! Blog</title>
<meta name="description" content="">
<meta name="keywords" content="">

<!-- Twitter cards -->
<meta name="twitter:site"    content="@laoazhang">
<meta name="twitter:creator" content="@laoazhang">


<meta name="twitter:card"  content="summary">
<meta name="twitter:image" content="https://laoazhang.cn/assets/images/avatar.jpg">



<meta name="twitter:title"   content="Filtrous.js Photo Manipulation Library">



<meta name="twitter:description" content="If you only do what you can do, you will never be more than you are now">


<!-- end of Twitter cards -->

<!-- Web Monetization | Interledger -->
<meta name="monetization" content="$ilp.uphold.com/6NxbkHNq9N84">
<meta name="monetization" content="$twitter.xrptipbot.com/laoazhang" />

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Filtrous.js Photo Manipulation Library">
<meta property="og:description" content="If you only do what you can do, you will never be more than you are now">
<meta property="og:url" content="https://laoazhang.cn/blog/2014/03/02/filterous/">
<meta property="og:site_name" content="Laoazhang! Blog">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="I-NDFBl5t1P9fqHmRNZhwu8OOHmwW4HADPiOr_r16cE">



<link rel="canonical" href="https://laoazhang.cn/blog/2014/03/02/filterous/">
<link href="https://laoazhang.cn/feed.xml" type="application/atom+xml" rel="alternate" title=" Feed">


<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,400,600,700' rel='stylesheet' type='text/css'>

<!-- For all browsers -->
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://laoazhang.cn/assets/js/vendor/modernizr/modernizr.js"></script>

<!-- Icons -->

<!-- favicon -->
<link rel="shortcut icon" href="https://laoazhang.cn/assets/ico/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://laoazhang.cn/assets/ico/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://laoazhang.cn/assets/ico/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://laoazhang.cn/assets/ico/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://laoazhang.cn/assets/ico/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="https://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="https://laoazhang.cn/index.html">Laoazhang.cn</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="https://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="https://laoazhang.cn/about" >About</a></li>
		        
				<li><a href="https://laoazhang.cn/blog" >Archive</a></li>
		        
				<li><a href="https://laoazhang.cn/presentations" >Preso</a></li>
		        
				<li><a href="https://laoazhang.cn/doodles" >Sketch Notes</a></li>
		        
				<li><a href="https://codepen.io/laoazhang" target="_blank">My CodePen</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="https://laoazhang.cn/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


<header role="banner">
</header>

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="https://schema.org/Blog">
  <div class="article-author-side">
  	<img src="https://laoazhang.cn/assets/images/avatar.jpg" class="bio-photo" alt="laoazhang">
    <h3>laoazhang</h3>
<p class="bio">An Open Web advocate and front-end engineer, who loves everything mobile, and writes about HTML5, CSS, JS, UX, tech events, gadgets, etc. She unintentionally got 15min of fame by creating The HTTP Status Cats. Also, the opinions expressed here are solely her own and do not express the views or opinions of my employer.</p>
<a href="https://twitter.com/laoazhang" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="https://facebook.com/laoazhang" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>

<a href="https://linkedin.com/in/laoazhang" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="https://instagram.com/laoazhang" class="author-social" target="_blank"><i class="icon-instagram"></i> Instagram</a>
<a href="https://github.com/laoazhang" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>




        <p class="license">
      
    </p>

  </div>

  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      
      <time datetime="2014-03-02T00:00:00-08:00" itemprop="datePublished"><i class="icon-calendar"></i> March 02, 2014</time>

      
      <h1 itemprop="name">Filtrous.js Photo Manipulation Library</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->

    <div class="article-wrap" itemprop="text">
      <p><img src="/assets/images/articles/2014/03/filtrous.jpg" alt="Filtrous" title="Filtrous" /></p>

<p><a href="https://github.com/girliemac/Filterous">Filtrous.js</a> is a photo manipulation library in JavaScript that applies filters to photos à la Instagram on browser.</p>

<p>I originally wrote this photo manipulation tool as a part of <em>CoreMob Camera</em> last year, and now I just released it as a separated library.</p>

<h3 id="camera-app-running-on-a-browser">Camera App running on a browser</h3>

<p><img src="/assets/images/articles/2014/03/coremobcamera.jpg" width="350" alt="CoreMob Camera" align="right" /></p>

<p>Last year was incredibly busy for me, and I totally failed to propertly document about this web app, although I promissed to write up on a separated blog.</p>

<p>I originally started writing this app in the end of 2012, with help of Tobie Langel, Dominique Hazael-Massieux et al. as a side project for <a href="https://github.com/coremob">Core Mobile Web Platform W3C Community Group</a> (which is now closed and reborn as <a href="https://github.com/w3c-webmob">Web and Mobile Interest Group</a>).</p>

<p>The web app (also, I have created a hybrid app with PhoneGap) was called <a href="https://github.com/coremob/camera">CoreMob Camera</a>, which allows you to take a snapshot directly from a browser, and apply filters to the photo, save onto the browser, also send to server. The whole purpose was to showcase the capabilities of the Web platform, showing developers HTML5 use cases on mobile, and help improve browsers by showing bugs, missing features etc. to browser vendors.</p>

<p>If you are curious, <a href="http://coremob.github.io/camera/vanilla/index.html">try the app on mobile browser</a>. This fails on some browsers, and the vendors are acknowledged.</p>

<p>I also talked about this app and the technology on several conferences, including <a href="http://www.w3.org/conf/2013sf/">W3C Conf</a>, so watch it if you are interested! (Watch my talk on <a href="https://www.youtube.com/watch?v=3Afi-v-m_Gc">YouTube</a>). Also, I was demoing this web app at Mobile World Congress 2013. See <a href="http://www.w3.org/blog/2013/04/interview-demonstrating-web-ap/">my interview</a> on W3C Blog ;-)</p>

<h2 id="filtrousjs---tweak-pixels-with-canvas">Filtrous.js - Tweak Pixels with Canvas</h2>

<p>Anyway, <em>Filtrous.js</em> take pixel data from a photo that you want to give filter effects, and maniplute its pixels using the <code class="language-plaintext highlighter-rouge">canvas</code> element. The finished photo can be displayed as canvas, or as downloadable image formats such as jpeg, png, or webp for Chrome.</p>

<p>This is how the photo manipulation works-</p>

<ul>
  <li>First a <code class="language-plaintext highlighter-rouge">&lt;canvas&gt;</code> is defined and import an photo into the canvas by using <code class="language-plaintext highlighter-rouge">drawImage()</code> method to draw the image object.</li>
  <li>Then, use <code class="language-plaintext highlighter-rouge">getImageData()</code> method to obtain an <code class="language-plaintext highlighter-rouge">ImageData</code> object containing a copy of the pixel data for a context.</li>
  <li>Then “applying filter” by tweaking the pixel data, which I will talk a bit more on the next slide.</li>
  <li>Finally, using <code class="language-plaintext highlighter-rouge">putImageData()</code> method, paint pixel data back into a context.</li>
</ul>

<p>The calculation of tweaking pixels is actually done on each canvas pixel by looping through one by one, so foe example, if your photo dimension is 100 x 100, you need to interate the operation for 10,000 times, and this can be slow on mobile. Well, at least I thought so last year, but mobile hardware and browsers have improved like crazy and I am surprised how quickly it can be on mobile done now, even with my “low-cost” Moto G device.</p>

<h3 id="usage">Usage</h3>

<p>Using Filtrous is easy. See this <a href="http://girliemac.com/Filterous/demo/">Demo</a> too.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">id=</span><span class="s">"myPhoto"</span> <span class="na">scr=</span><span class="s">"cat.jpg"</span><span class="nt">&gt;</span>

</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">myPhoto</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">myPhoto</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Filterous</span><span class="p">(</span><span class="nx">myPhoto</span><span class="p">,</span> <span class="dl">'</span><span class="s1">jpeg</span><span class="dl">'</span><span class="p">);</span> <span class="c1">// output: jpeg, png, webp. default is canvas</span>

</code></pre></div></div>

<p>The image on top of this blog shows examples of combination of “beightness” and “rgbAdjust” filters (center), and grayscale (right).</p>

<p>The effect in the middle can be achieved by applying two filters:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">f</span><span class="p">.</span><span class="nf">filterImage</span><span class="p">(</span><span class="dl">'</span><span class="s1">rgbAdjust</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">]);</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">filterImage</span><span class="p">(</span><span class="dl">'</span><span class="s1">brightness</span><span class="dl">'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="nx">f</span><span class="p">.</span><span class="nf">render</span><span class="p">();</span>
</code></pre></div></div>

<p>Also, I have made an extra JS file that you can import, so you can use the named preset effects such as “nostalgia” (slightly sepea tone) and “rockstar” (with starry overlay) that you see in the demo.</p>

<p>If you would like to use <em>Filtrous</em>, see my <a href="https://github.com/girliemac/Filterous">github</a> page for more info :-)</p>

<h2 id="why-not-css3">Why not CSS3?</h2>

<p>Multiple people have asked me why I used <code class="language-plaintext highlighter-rouge">canvas</code> while the CSS3 Filter effects has been adopted by WebKit and Blink browsers.
I love the ease of using the CSS3 filters and wrote a <a href="/blog/2011/12/21/quick-fun-css3-filter-effects/">blog</a> about it too. However, unlike the pixel manipulation in canvas, the CSS filter is just a visual representation and it does not actually alter the physical property of the photos. When you download the filtered photo, you still get the unfiltered original image.</p>

<h2 id="links">Links</h2>

<ul>
  <li><a href="https://github.com/girliemac/Filterous">Filterous.js on Github</a></li>
  <li><a href="http://girliemac.com/Filterous/demo/">Filterous.js Demo</a></li>
  <li><a href="https://github.com/coremob/camera">CoreMob Camera</a></li>
</ul>


      <hr>

      <!-- Pagination -->
      <ul class="pagination">
	      
	        <li class="prev"><a href="/blog/2014/02/14/vibration/" rel="prev">&larr; Vibration API Use Case: Form Validation</a></li>
	      
	      
	        <li class="next"><a href="/blog/2014/03/21/notifications/" rel="next">Web Notifications Update &rarr;</a></li>
	      
	  </ul>

      <hr style="visibility:hidden;">

      <!-- Categories -->
      
	  <ul class="categories">
	      <li><i class="icon-drawer"></i></li>
	      

	      
		    
		    	<li data-size="44"><a href="/categories/#Dev">
		    		Dev
		    	</a></li>
		    
		    	<li data-size="21"><a href="/categories/#HTML5">
		    		HTML5
		    	</a></li>
		    
		    	<li data-size="5"><a href="/categories/#Javascript">
		    		Javascript
		    	</a></li>
		    
		    	<li data-size="6"><a href="/categories/#mobile">
		    		mobile
		    	</a></li>
		    
		    	<li data-size="5"><a href="/categories/#firefox">
		    		firefox
		    	</a></li>
		    
		  
	      

	  </ul>
	  

	  <!-- Disqus -->
	      <div id="disqus_thread" style="margin-top: 3em"></div>
		    <script type="text/javascript">
		        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		        var disqus_shortname = 'laoazhang'; // required: replace example with your forum shortname
				

		        /* * * DON'T EDIT BELOW THIS LINE * * */
		        (function() {
		            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		        })();
		    </script>
		    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">

    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<footer>
  <small class="copyright">
    <span>&copy; 2024 laoazhang. Powered by <a href="http://jekyllrb.com">Jekyll</a> with modified <em>Minimal Mistakes</em> theme. Hosted on <a href="http://github.com">Github</a>.
  </small>
</footer>

<script src="https://laoazhang.cn/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-2635445-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<script>

</script>

</body>
</html>
