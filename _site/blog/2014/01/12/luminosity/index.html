<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Responsive UI with Luminosity Level &#8211; Laoazhang! Blog</title>
<meta name="description" content="">
<meta name="keywords" content="">

<!-- Twitter cards -->
<meta name="twitter:site"    content="@laoazhang">
<meta name="twitter:creator" content="@laoazhang">


<meta name="twitter:card"  content="summary">
<meta name="twitter:image" content="https://laoazhang.cn/assets/images/avatar.jpg">



<meta name="twitter:title"   content="Responsive UI with Luminosity Level">



<meta name="twitter:description" content="If you only do what you can do, you will never be more than you are now">


<!-- end of Twitter cards -->

<!-- Web Monetization | Interledger -->
<meta name="monetization" content="$ilp.uphold.com/6NxbkHNq9N84">
<meta name="monetization" content="$twitter.xrptipbot.com/laoazhang" />

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Responsive UI with Luminosity Level">
<meta property="og:description" content="If you only do what you can do, you will never be more than you are now">
<meta property="og:url" content="https://laoazhang.cn/blog/2014/01/12/luminosity/">
<meta property="og:site_name" content="Laoazhang! Blog">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="I-NDFBl5t1P9fqHmRNZhwu8OOHmwW4HADPiOr_r16cE">



<link rel="canonical" href="https://laoazhang.cn/blog/2014/01/12/luminosity/">
<link href="https://laoazhang.cn/feed.xml" type="application/atom+xml" rel="alternate" title=" Feed">


<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,400,600,700' rel='stylesheet' type='text/css'>

<!-- For all browsers -->
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://laoazhang.cn/assets/js/vendor/modernizr/modernizr.js"></script>

<!-- Icons -->

<!-- favicon -->
<link rel="shortcut icon" href="https://laoazhang.cn/assets/ico/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://laoazhang.cn/assets/ico/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://laoazhang.cn/assets/ico/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://laoazhang.cn/assets/ico/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://laoazhang.cn/assets/ico/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="https://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="https://laoazhang.cn/index.html">Laoazhang.cn</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="https://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="https://laoazhang.cn/about" >About</a></li>
		        
				<li><a href="https://laoazhang.cn/blog" >Archive</a></li>
		        
				<li><a href="https://laoazhang.cn/presentations" >Preso</a></li>
		        
				<li><a href="https://laoazhang.cn/doodles" >Sketch Notes</a></li>
		        
				<li><a href="https://codepen.io/laoazhang" target="_blank">My CodePen</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="https://laoazhang.cn/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


<header role="banner">
</header>

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="https://schema.org/Blog">
  <div class="article-author-side">
  	<img src="https://laoazhang.cn/assets/images/avatar.jpg" class="bio-photo" alt="laoazhang">
    <h3>laoazhang</h3>
<p class="bio">An Open Web advocate and front-end engineer, who loves everything mobile, and writes about HTML5, CSS, JS, UX, tech events, gadgets, etc. She unintentionally got 15min of fame by creating The HTTP Status Cats. Also, the opinions expressed here are solely her own and do not express the views or opinions of my employer.</p>
<a href="https://twitter.com/laoazhang" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="https://facebook.com/laoazhang" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>

<a href="https://linkedin.com/in/laoazhang" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="https://instagram.com/laoazhang" class="author-social" target="_blank"><i class="icon-instagram"></i> Instagram</a>
<a href="https://github.com/laoazhang" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>




        <p class="license">
      
    </p>

  </div>

  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      
      <time datetime="2014-01-12T00:00:00-08:00" itemprop="datePublished"><i class="icon-calendar"></i> January 12, 2014</time>

      
      <h1 itemprop="name">Responsive UI with Luminosity Level</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->

    <div class="article-wrap" itemprop="text">
      <p>Happy new year!</p>

<p>I wonder how the year 2014 will be in terms of the web standards and HTML5, as the first biggest news of the year from W3C was the MPAA joining the W3C as a member and the controversy on DRM has heated up again.</p>

<p>My first blog of the year is not going to be about DRM, but I write a topic on responsive design with ambient light level, which I cover a little bit at SF HTML5 meetup last November, where I received some oohs and aahs so I want to write about it more here.</p>

<h2 id="screen-readability-under-sunlight">Screen readability under sunlight</h2>

<p>My Lumia phone comes with the awesome sunlight readability enhancement feature. It detects the light levels in my environment and adjust the screen accordingly. When I get outside under the sun from indoor, the luminance of the screen increases, so I can still read my screen just fine. On the other hand, my another phone, an Android device becomes totally useless under such brightness.
So it doesn’t matter how the web sites are made “Mobile first” and how “responsive” they claimed to be, I just can’t read anything. I wish all other phones work just like Lumia.</p>

<p>Meanwhile, sometimes last year, on W3C CSS mailing list, I learned the <code class="language-plaintext highlighter-rouge">luminosity</code> media feature was coming to the <a href="http://dev.w3.org/csswg/mediaqueries4/#luminosity">CSS Media Queries 4</a>, and I was excited. Yes, besides screen resolutions, orientations, pixel density and such, we will be able to make web responsive with the environmetal light level too, once the spec is implemented in browsers!</p>

<p>Awesome. But when will it happen?</p>

<h2 id="ambient-light-events-api">Ambient Light Events API</h2>

<p>So there is no way for us to adjust the readability with light level using CSS in this moment, however, we already have the <a href="http://www.w3.org/TR/ambient-light/">Ambient Light Events</a>.
This is a part of the HTML5 <a href="http://www.w3.org/2009/dap/">Device APIs</a>, which make browsers to interact with devices services. Ambient Light Events API allows to access the light/photo censor, using simple JavaScript.</p>

<p>Now I can use the API to emulate the yet-to-come CSS Level 4 Media-queires to make a web responsive to the light level!</p>

<h3 id="devicelight-events">Devicelight events</h3>

<p>A browser fires the <code class="language-plaintext highlighter-rouge">DeviceLightEvent</code> event when the light sensor of a device detects a light level change. You can capture the event by using the <code class="language-plaintext highlighter-rouge">devicelight</code> event handler event type.</p>

<p>Its property, <code class="language-plaintext highlighter-rouge">value</code> returns the level of the light in <em>lux</em> unit.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">window</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">devicelight</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">lux</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="making-web-responsive-to-light">Making web responsive to light</h3>

<p>I have made a super simple demo.</p>

<p>What I did is basically changing the UI, depending on the light level in the device environment for better readability.</p>

<ul>
  <li>Default: display in black text and light gray background</li>
  <li>Under bright light: black text and white background</li>
  <li>In darkness: white text and dark background</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">window</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">devicelight</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">lux</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
 
  <span class="k">if</span><span class="p">(</span><span class="nx">lux</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// dim</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">dim</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">lux</span> <span class="o">&gt;=</span> <span class="mi">50</span> <span class="o">&amp;&amp;</span> <span class="nx">lux</span> <span class="o">&lt;=</span> <span class="mi">1000</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">normal</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">lux</span> <span class="o">&gt;</span> <span class="mi">1000</span><span class="p">)</span>  <span class="p">{</span> <span class="c1">// bright</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">bright</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span> 
<span class="p">});</span>
</code></pre></div></div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nt">body</span><span class="o">,</span>
<span class="nt">body</span><span class="nc">.normal</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#ddd</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#111</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">body</span><span class="nc">.dim</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#444</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">body</span><span class="nc">.bright</span> <span class="p">{</span>
  <span class="nl">background-color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#333</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Here’s the video showing the demo in action.</p>

<iframe src="//player.vimeo.com/video/79466285" width="500" height="280" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>

<h3 id="browser-supports-and-devices">Browser supports and Devices</h3>

<p>The source code is on <a href="http://codepen.io/girliemac/pen/pvmBs">CodePen</a>.</p>

<p>Most of you will probably noticed the message that says <em>“AmbientLightEvent is not supported.”</em> on the browser you are currently looking at.
Sadly, this API is currently only supported by <a href="https://developer.mozilla.org/en-US/docs/Web/API/DeviceLightEvent"><strong>Firefox 22+</strong></a>, and the hardware needs to be equipped with a sensor to detect light. In my demo, I am using Firefox on <strong>Nexus 7</strong>.</p>

<p>The actual values returned from the event seem to be varied depending on the devices (Android and FirefoxOS) I tested. Probably the sensor’s sensitivity are different.</p>

<p><img src="/assets/images/articles/2014/01/luminosity-devices.jpg" alt="MotoG and Keon" title="MotoG and Keon" /></p>

<p>The photo shows that the Motolora G and Keon FirefoxOS devices show different values under the same dim room light. (6 lux vs. 61 lux!)</p>

<h2 id="css-media-queries-level-4-luminosity">CSS Media Queries Level 4 Luminosity</h2>

<p>OK, let’s go back to the original topic, Luminosity media-queries.
Currently, the <a href="http://dev.w3.org/csswg/mediaqueries4/#luminosity">specification</a> is under editor’s draft, which means that the spec is still in really early stage and unstable. It will take a while to see it in action on browsers.</p>

<p>Once this is supported, the JavaScript sample can be re-written only with CSS:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">@media</span> <span class="n">screen</span> <span class="n">and</span> <span class="p">(</span><span class="n">luminosity</span><span class="p">:</span> <span class="nb">normal</span><span class="p">)</span> <span class="p">{</span>
  <span class="nt">body</span> <span class="p">{</span><span class="nl">background-color</span><span class="p">:</span> <span class="m">#ddd</span><span class="p">;</span> <span class="nl">color</span><span class="p">:</span> <span class="m">#111</span><span class="p">;}</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">screen</span> <span class="n">and</span> <span class="p">(</span><span class="n">luminosity</span><span class="p">:</span> <span class="n">dim</span><span class="p">)</span> <span class="p">{</span>
  <span class="nt">body</span> <span class="p">{</span><span class="nl">background-color</span><span class="p">:</span> <span class="m">#444</span><span class="p">;</span> <span class="nl">color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;}</span>
<span class="p">}</span>
<span class="k">@media</span> <span class="n">screen</span> <span class="n">and</span> <span class="p">(</span><span class="n">luminosity</span><span class="p">:</span> <span class="n">washed</span><span class="p">)</span> <span class="p">{</span>
  <span class="nt">body</span> <span class="p">{</span><span class="nl">background-color</span><span class="p">:</span> <span class="m">#fff</span><span class="p">;</span> <span class="nl">color</span><span class="p">:</span> <span class="m">#333</span><span class="p">;}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>We can simply use <code class="language-plaintext highlighter-rouge">luminosity</code> media feature to query the light level, just like any other media features we are already used to write to create responsive web.</p>

<p>Now, we have more things to worry when thinking of RWD ;-)</p>


      <hr>

      <!-- Pagination -->
      <ul class="pagination">
	      
	        <li class="prev"><a href="/blog/2013/12/27/wordpress-to-jekyll/" rel="prev">&larr; How-to: Migrating Blog from WordPress to Jekyll, and Host on Github</a></li>
	      
	      
	        <li class="next"><a href="/blog/2014/02/14/vibration/" rel="next">Vibration API Use Case: Form Validation &rarr;</a></li>
	      
	  </ul>

      <hr style="visibility:hidden;">

      <!-- Categories -->
      
	  <ul class="categories">
	      <li><i class="icon-drawer"></i></li>
	      

	      
		    
		    	<li data-size="44"><a href="/categories/#Dev">
		    		Dev
		    	</a></li>
		    
		    	<li data-size="21"><a href="/categories/#HTML5">
		    		HTML5
		    	</a></li>
		    
		    	<li data-size="5"><a href="/categories/#Javascript">
		    		Javascript
		    	</a></li>
		    
		    	<li data-size="27"><a href="/categories/#CSS">
		    		CSS
		    	</a></li>
		    
		    	<li data-size="6"><a href="/categories/#mobile">
		    		mobile
		    	</a></li>
		    
		    	<li data-size="2"><a href="/categories/#rwd">
		    		rwd
		    	</a></li>
		    
		    	<li data-size="5"><a href="/categories/#firefox">
		    		firefox
		    	</a></li>
		    
		    	<li data-size="2"><a href="/categories/#ui/ux">
		    		ui/ux
		    	</a></li>
		    
		    	<li data-size="1"><a href="/categories/#design">
		    		design
		    	</a></li>
		    
		  
	      

	  </ul>
	  

	  <!-- Disqus -->
	      <div id="disqus_thread" style="margin-top: 3em"></div>
		    <script type="text/javascript">
		        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		        var disqus_shortname = 'laoazhang'; // required: replace example with your forum shortname
				

		        /* * * DON'T EDIT BELOW THIS LINE * * */
		        (function() {
		            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		        })();
		    </script>
		    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">

    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<footer>
  <small class="copyright">
    <span>&copy; 2024 laoazhang. Powered by <a href="http://jekyllrb.com">Jekyll</a> with modified <em>Minimal Mistakes</em> theme. Hosted on <a href="http://github.com">Github</a>.
  </small>
</footer>

<script src="https://laoazhang.cn/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-2635445-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<script>

</script>

</body>
</html>
