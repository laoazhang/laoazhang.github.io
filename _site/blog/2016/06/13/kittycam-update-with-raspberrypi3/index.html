<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Upgrading KittyCam with Raspberry Pi 3 &#8211; Laoazhang! Blog</title>
<meta name="description" content="">
<meta name="keywords" content="">

<!-- Twitter cards -->
<meta name="twitter:site"    content="@laoazhang">
<meta name="twitter:creator" content="@laoazhang">



<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://laoazhang.cn//assets/images/articles/2015/12/youtube-kittycam-thumb.jpg">



<meta name="twitter:title"   content="Upgrading KittyCam with Raspberry Pi 3">



<meta name="twitter:description" content="If you only do what you can do, you will never be more than you are now">


<!-- end of Twitter cards -->

<!-- Web Monetization | Interledger -->
<meta name="monetization" content="$ilp.uphold.com/6NxbkHNq9N84">
<meta name="monetization" content="$twitter.xrptipbot.com/laoazhang" />

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Upgrading KittyCam with Raspberry Pi 3">
<meta property="og:description" content="If you only do what you can do, you will never be more than you are now">
<meta property="og:url" content="https://laoazhang.cn/blog/2016/06/13/kittycam-update-with-raspberrypi3/">
<meta property="og:site_name" content="Laoazhang! Blog">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="I-NDFBl5t1P9fqHmRNZhwu8OOHmwW4HADPiOr_r16cE">



<link rel="canonical" href="https://laoazhang.cn/blog/2016/06/13/kittycam-update-with-raspberrypi3/">
<link href="https://laoazhang.cn/feed.xml" type="application/atom+xml" rel="alternate" title=" Feed">


<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,400,600,700' rel='stylesheet' type='text/css'>

<!-- For all browsers -->
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://laoazhang.cn/assets/js/vendor/modernizr/modernizr.js"></script>

<!-- Icons -->

<!-- favicon -->
<link rel="shortcut icon" href="https://laoazhang.cn/assets/ico/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://laoazhang.cn/assets/ico/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://laoazhang.cn/assets/ico/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://laoazhang.cn/assets/ico/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://laoazhang.cn/assets/ico/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="https://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="https://laoazhang.cn/index.html">Laoazhang.cn</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="https://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="https://laoazhang.cn/about" >About</a></li>
		        
				<li><a href="https://laoazhang.cn/blog" >Archive</a></li>
		        
				<li><a href="https://laoazhang.cn/presentations" >Preso</a></li>
		        
				<li><a href="https://laoazhang.cn/doodles" >Sketch Notes</a></li>
		        
				<li><a href="https://codepen.io/laoazhang" target="_blank">My CodePen</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="https://laoazhang.cn/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


<header role="banner">
</header>

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="https://schema.org/Blog">
  <div class="article-author-side">
  	<img src="https://laoazhang.cn/assets/images/avatar.jpg" class="bio-photo" alt="laoazhang">
    <h3>laoazhang</h3>
<p class="bio">An Open Web advocate and front-end engineer, who loves everything mobile, and writes about HTML5, CSS, JS, UX, tech events, gadgets, etc. She unintentionally got 15min of fame by creating The HTTP Status Cats. Also, the opinions expressed here are solely her own and do not express the views or opinions of my employer.</p>
<a href="https://twitter.com/laoazhang" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="https://facebook.com/laoazhang" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>

<a href="https://linkedin.com/in/laoazhang" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="https://instagram.com/laoazhang" class="author-social" target="_blank"><i class="icon-instagram"></i> Instagram</a>
<a href="https://github.com/laoazhang" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>




        <p class="license">
      
    </p>

  </div>

  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      
      <time datetime="2016-06-13T00:00:00-07:00" itemprop="datePublished"><i class="icon-calendar"></i> June 13, 2016</time>

      
      <h1 itemprop="name">Upgrading KittyCam with Raspberry Pi 3</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->

    <div class="article-wrap" itemprop="text">
      <p>I was excited when <strong>Raspberry Pi 3</strong> came out earlier this year. According to <a href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">raspberrypi.org</a>, this 3rd generation Pi has faster CPU, WiFi, and Bluetooth 41. and BLE, additional to the previous model.</p>

<p>So I decided to upgrade <a href="http://www.girliemac.com/blog/2015/12/25/kittycam-raspberrypi-camera-cat-face-recog-nodejs/">KittyCam</a>, a cat camera app built with my Raspberry Pi + Node.js project, which and I blogged about a while ago.</p>

<p>At that time, I was using the older Node v0.12.x (pre-IO.js, which I almost forgot about it happened after merged back with Node.js), so I decided to upgrade everything.</p>

<h2 id="install-the-latest-raspbian">Install the Latest Raspbian</h2>

<p>Since I got a brand-new Pi3, I install everything fresh, so instead of swapping the SD card from the old Pi, I installed the latest Raspbian build.</p>

<p>Forst, I download the latest <strong>Raspbian Jesse</strong> from <a href="https://www.raspberrypi.org/downloads/raspbian/">raspberrypi.org</a> to my Mac, then install it in a micro SD card using these <a href="https://www.raspberrypi.org/documentation/installation/installing-images/README.md">instructions</a> using <code class="language-plaintext highlighter-rouge">dd</code> tool.</p>

<p>In case you are also a MacBook Air user and don’t know, your MacBook has a SD card slot on the right hand side. But you will need an adapter.</p>

<p><img src="/assets/images/articles/2016/06/sdcard.jpg" alt="SD card adapter" /></p>

<p>The image is from <a href="(https://learn.sparkfun.com/tutorials/sd-cards-and-writing-images)">“SD Cards and Writing Images”</a> by Sparkfun (<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">CC BY-NC-SA 3.0</a>).</p>

<h2 id="installing-node-4">Installing Node 4</h2>

<p>Last time with Node 0.12, I used the 3rd party <a href="http://node-arm.herokuapp.com/">node-arm</a> to install it, but now ARM version is officially supported on <a href="https://nodejs.org/">nodejs.org</a>.</p>

<p>So you can just open up a browser in Raspbian, and download from <a href="https://nodejs.org/en/download/">nodejs.org Download page</a>:</p>

<p>Scroll the page down to <strong>Additional Platforms</strong> and choose ARMv7 (Note: I think ARMv8 works too, but I installed v7).</p>

<p><img src="/assets/images/articles/2016/06/raspi3-node4-armv7.png" alt="node download" /></p>

<p>or download and install on terminal as I did:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wget https://nodejs.org/dist/v4.4.5/node-v4.4.5-linux-armv7l.tar.xz
<span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-xvf</span> node-v4.4.5-linux-armv7l.tar.xz
<span class="nv">$ </span><span class="nb">cd </span>node-v4.4.5-linux-armv7l
<span class="nv">$ </span><span class="nb">sudo cp</span> <span class="nt">-R</span> <span class="k">*</span> /usr/local/
</code></pre></div></div>

<p>Check if Node is successfully installed by checking its version:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>node <span class="nt">-v</span>
</code></pre></div></div>

<p>If you wish, upgrade <strong>npm</strong> to v3 too.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">-g</span> npm3
</code></pre></div></div>

<h2 id="installing-updated-dependencies-for-kittycam">Installing Updated Dependencies for KittyCam</h2>

<p>Create a <code class="language-plaintext highlighter-rouge">KittyCam</code> directory and copy everything except <code class="language-plaintext highlighter-rouge">package.json</code>from <a href="https://github.com/girliemac/RPi-KittyCam">KittyCam repo</a>. But also keep the <code class="language-plaintext highlighter-rouge">node_modules/kittydar</code> because installing kittydar using npm, and use it as is will fail, when you install Node-Canvas. (or tweak kittydar’s <code class="language-plaintext highlighter-rouge">package.json</code> manually!)</p>

<h3 id="installing-cairo">Installing Cairo</h3>

<p>Get <strong>Cairo</strong> on your Raspbian bore installing Node-Canvas:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>libcairo2-dev libjpeg8-dev libpango1.0-dev libgif-dev build-essential g++
</code></pre></div></div>

<p>Once set up with Cairo, in KittyCam dir,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>canvas
</code></pre></div></div>

<h3 id="installing-johnny-five">Installing Johnny-Five</h3>

<p>Also, since the last time I created KittyCam, <a href="http://johnny-five.io/">Johnny-Five</a> and the IO-plugin for Raspberry Pi, <a href="https://github.com/bryan-m-hughes/raspi-io">Raspi-io</a> have been upgraded a lot too. So just install the latest manually:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>johnny-five <span class="nt">--save</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install </span>raspi-io <span class="nt">--save</span>
</code></pre></div></div>

<h3 id="installing-all-other-node-modules">Installing All other Node Modules</h3>

<p>and all other node modules used for KittyCam. In the app, I am also using Cloudinary and PubNub. You can install both with npm too.</p>

<h2 id="hardware-wiring">Hardware Wiring</h2>

<p>I have not updated any hardware besides Pi.</p>

<p>When you hook up with a camera, make sure to enable the camera module from the <strong>Pi Software Config Tool</strong>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>raspi-config
</code></pre></div></div>

<p>Now, everything should work with Raspberry Pi 3!</p>

<p>I had chance to test it out while I was taking care of my friends’ cats!</p>

<p><img src="/assets/images/articles/2016/06/qateam.png" alt="QA Team" /></p>

<p>I have given the talk about KittyCam in a few conferences and meetups so far, such as NodePDX in Portland and ForwardJS in San Francisco. My slide deck is available on <a href="http://www.slideshare.net/tomomi/nodepdx-from-software-to-hardware-how-do-i-track-my-cat-with-javascript">SlideShare</a>!</p>

      <hr>

      <!-- Pagination -->
      <ul class="pagination">
	      
	        <li class="prev"><a href="/blog/2015/12/25/kittycam-raspberrypi-camera-cat-face-recog-nodejs/" rel="prev">&larr; KittyCam - Building a Raspberry Pi Camera with Cat Face Detection in Node.js</a></li>
	      
	      
	        <li class="next"><a href="/blog/2016/07/30/arduino-johnny-five-101/" rel="next">Arduino with Johnny-Five 101 - Video Tutorial &rarr;</a></li>
	      
	  </ul>

      <hr style="visibility:hidden;">

      <!-- Categories -->
      
	  <ul class="categories">
	      <li><i class="icon-drawer"></i></li>
	      

	      
		    
		    	<li data-size="15"><a href="/categories/#dev">
		    		dev
		    	</a></li>
		    
		    	<li data-size="3"><a href="/categories/#raspberrypi">
		    		raspberrypi
		    	</a></li>
		    
		    	<li data-size="5"><a href="/categories/#pubnub">
		    		pubnub
		    	</a></li>
		    
		    	<li data-size="10"><a href="/categories/#javascript">
		    		javascript
		    	</a></li>
		    
		    	<li data-size="8"><a href="/categories/#node.js">
		    		node.js
		    	</a></li>
		    
		    	<li data-size="4"><a href="/categories/#cats">
		    		cats
		    	</a></li>
		    
		  
	      

	  </ul>
	  

	  <!-- Disqus -->
	      <div id="disqus_thread" style="margin-top: 3em"></div>
		    <script type="text/javascript">
		        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		        var disqus_shortname = 'laoazhang'; // required: replace example with your forum shortname
				

		        /* * * DON'T EDIT BELOW THIS LINE * * */
		        (function() {
		            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		        })();
		    </script>
		    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">

    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<footer>
  <small class="copyright">
    <span>&copy; 2024 laoazhang. Powered by <a href="http://jekyllrb.com">Jekyll</a> with modified <em>Minimal Mistakes</em> theme. Hosted on <a href="http://github.com">Github</a>.
  </small>
</footer>

<script src="https://laoazhang.cn/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-2635445-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<script>

</script>

</body>
</html>
