<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>HTML5 Input Event Handlers and User-Experience &#8211; Laoazhang! Blog</title>
<meta name="description" content="">
<meta name="keywords" content="">

<!-- Twitter cards -->
<meta name="twitter:site"    content="@laoazhang">
<meta name="twitter:creator" content="@laoazhang">


<meta name="twitter:card"  content="summary">
<meta name="twitter:image" content="https://laoazhang.cn/assets/images/avatar.jpg">



<meta name="twitter:title"   content="HTML5 Input Event Handlers and User-Experience">



<meta name="twitter:description" content="If you only do what you can do, you will never be more than you are now">


<!-- end of Twitter cards -->

<!-- Web Monetization | Interledger -->
<meta name="monetization" content="$ilp.uphold.com/6NxbkHNq9N84">
<meta name="monetization" content="$twitter.xrptipbot.com/laoazhang" />

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="HTML5 Input Event Handlers and User-Experience">
<meta property="og:description" content="If you only do what you can do, you will never be more than you are now">
<meta property="og:url" content="https://laoazhang.cn/blog/2011/11/27/html5-input-events/">
<meta property="og:site_name" content="Laoazhang! Blog">

<!-- Webmaster Tools verfication -->
<meta name="google-site-verification" content="I-NDFBl5t1P9fqHmRNZhwu8OOHmwW4HADPiOr_r16cE">



<link rel="canonical" href="https://laoazhang.cn/blog/2011/11/27/html5-input-events/">
<link href="https://laoazhang.cn/feed.xml" type="application/atom+xml" rel="alternate" title=" Feed">


<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='//fonts.googleapis.com/css?family=Open+Sans:400italic,400,600,700' rel='stylesheet' type='text/css'>

<!-- For all browsers -->
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="https://laoazhang.cn/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://laoazhang.cn/assets/js/vendor/modernizr/modernizr.js"></script>

<!-- Icons -->

<!-- favicon -->
<link rel="shortcut icon" href="https://laoazhang.cn/assets/ico/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://laoazhang.cn/assets/ico/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://laoazhang.cn/assets/ico/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://laoazhang.cn/assets/ico/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://laoazhang.cn/assets/ico/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="article" itemscope itemtype="https://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="https://laoazhang.cn/index.html">Laoazhang.cn</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="https://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="https://laoazhang.cn/about" >About</a></li>
		        
				<li><a href="https://laoazhang.cn/blog" >Archive</a></li>
		        
				<li><a href="https://laoazhang.cn/presentations" >Preso</a></li>
		        
				<li><a href="https://laoazhang.cn/doodles" >Sketch Notes</a></li>
		        
				<li><a href="https://codepen.io/laoazhang" target="_blank">My CodePen</a></li>
		        
		        <li><i class="icon-feed"></i> <a href="https://laoazhang.cn/feed.xml" title="Atom/RSS feed">Feed</a>
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->


<header role="banner">
</header>

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="https://schema.org/Blog">
  <div class="article-author-side">
  	<img src="https://laoazhang.cn/assets/images/avatar.jpg" class="bio-photo" alt="laoazhang">
    <h3>laoazhang</h3>
<p class="bio">An Open Web advocate and front-end engineer, who loves everything mobile, and writes about HTML5, CSS, JS, UX, tech events, gadgets, etc. She unintentionally got 15min of fame by creating The HTTP Status Cats. Also, the opinions expressed here are solely her own and do not express the views or opinions of my employer.</p>
<a href="https://twitter.com/laoazhang" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>
<a href="https://facebook.com/laoazhang" class="author-social" target="_blank"><i class="icon-facebook"></i> Facebook</a>

<a href="https://linkedin.com/in/laoazhang" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>
<a href="https://instagram.com/laoazhang" class="author-social" target="_blank"><i class="icon-instagram"></i> Instagram</a>
<a href="https://github.com/laoazhang" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>




        <p class="license">
      
    </p>

  </div>

  <article itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
    <div class="headline-wrap">
      
      <time datetime="2011-11-27T00:00:00-08:00" itemprop="datePublished"><i class="icon-calendar"></i> November 27, 2011</time>

      
      <h1 itemprop="name">HTML5 Input Event Handlers and User-Experience</h1>
      <h2></h2>
    </div><!--/ .headline-wrap -->

    <div class="article-wrap" itemprop="text">
      <h2 id="tldr">TL;DR</h2>

<p>Summary: Use <code class="language-plaintext highlighter-rouge">oninput</code> event handler (or <code class="language-plaintext highlighter-rouge">input</code> event handler event type) when you register an event to the HTML5 <code class="language-plaintext highlighter-rouge">input[type="number"]</code>, instead of <code class="language-plaintext highlighter-rouge">onchange</code>, <code class="language-plaintext highlighter-rouge">onkeyup/down</code> (although you may want to include them as the fall-back).</p>

<h2 id="the-whole-story">The Whole Story</h2>

<p>When I participated to compete for <a href="http://nodeknockout.com/" target="_blank">Node.js Knock-out</a> in the end of the summer, I have learned one thing (besides all the node.js coolness) in a bitter way, from the comments by judges: “the app UI is confusing.”<br />
Actually, I believed that the app user-interface overall was intuitive enough, however, the one mistake I made with an HTML5 form killed the user-experience – I used a wrong event handler, something that doesn’t trigger when it needed to…</p>

<p>So here, I explain what I didn’t know; the newly introduced event handlers for HTML5.</p>

<p><img src="/assets/images/wp-content/uploads/2011/11/input-number.png" alt="input type=number" title="input-number" width="221" height="117" /></p>

<p>The screenshot above is a number input control, the input element with a type attribute which value is “number”. It represents a precise control for setting the element’s value to a string representing a number.</p>

<p>Simply, you can write this in html like this:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"number"</span> <span class="na">placeholder=</span><span class="s">"Pick a number"</span> <span class="na">id=</span><span class="s">"numPeople"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>You can add some more custom attributes like, <code class="language-plaintext highlighter-rouge">required</code>, <code class="language-plaintext highlighter-rouge">autofocus</code>, <code class="language-plaintext highlighter-rouge">pattern</code>, etc, and the number-specific attributes, <code class="language-plaintext highlighter-rouge">min</code>, <code class="language-plaintext highlighter-rouge">max</code>, and <code class="language-plaintext highlighter-rouge">step</code>. If you are not familiar with the html5 form input attributes, I recommend you should read <a href="http://dev.opera.com/articles/view/new-form-features-in-html5/" target="_blank">New form features in HTML5</a> by Dev Opera.</p>

<p>So what I wanted to do in the particular app was that populating new fields as the user chooses a number. The simple user-flow is:</p>

<ol>
  <li>“How many people would you like to add?” – e.g. a user picks 5</li>
  <li>n-number of new fileds are populated – e.g. 5 text fileds are displayed</li>
  <li>the user fills out the text fields</li>
  <li>the user submit the form</li>
</ol>

<p><img src="/assets/images/wp-content/uploads/2011/11/input-number2.png" alt="screenshot" title="input-number2" width="340" height="300" class="alignnone size-full wp-image-338" /></p>

<p>To make the flow #1 and #2 work, what I did was that I registered an event listener to the number input element, and used an event type to listen for.<br />
OK, so which event type? – Well, I initially thought of <code class="language-plaintext highlighter-rouge">change</code>, however, it requires the user to unfocus (blur) the field once, to get the event captured. So, I decided to use <code class="language-plaintext highlighter-rouge">keyup</code> so as soon as the user finish typing a number, the event is fired and the function to display the extra fields is called.</p>

<p>OK, it sounds fine – well, only as long as the user only enter the number manually!</p>

<p>Remember, the HTML5 input field <code class="language-plaintext highlighter-rouge">type="number"</code> has the special user-interface, <em>a spinner control</em>, which allows a user to increment and decrement its value. And here is the problem – the <em>keyup</em> event does <em>not</em> get triggered when the spinner up/down arrow is clicked, at least on Chrome (which the judges were using)! So when some judges tried the app for the first time without much knowing what it does, and picked a number with the spinner control, nothing happened. The app’s UX was killed right there!</p>

<p>So, really, which event did I need to use?</p>

<p>The answer is <code class="language-plaintext highlighter-rouge">input</code>. I did not know about the newly introduced HTML5 <code class="language-plaintext highlighter-rouge">oninput</code> event handler until I found <a href="http://whattheheadsaid.com/2010/09/effectively-detecting-user-input-in-javascript" target="_blank"></a>this article&lt;/a&gt;.</p>

<p>Now, the action is triggered when a user manually type a number, or when the user increment/decrement with the up/down spinner!</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">numPeople</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">numPeople</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">numPeople</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">input</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="nx">numPeople</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">...</span>
<span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
</code></pre></div></div>

<p>Please see the entire &lt;a href=”http://jsfiddle.net/girlie_mac/CcqU7/” target=_blank”&gt;code snippet and working demo&lt;/a&gt;!</p>

<p>Also, I made &lt;a href=”http://jsfiddle.net/girlie_mac/5Assc/” target=_blank”&gt;another small demo here&lt;/a&gt; so you can see when the <code class="language-plaintext highlighter-rouge">input</code>, <code class="language-plaintext highlighter-rouge">keuyp</code>, and <code class="language-plaintext highlighter-rouge">change</code> are captured.</p>

<h2 id="onsearch-event">onsearch Event</h2>

<p>Additionally, there is another HTML5 event that you probably want to know – the <code class="language-plaintext highlighter-rouge">search</code>. The action is invoked when a user hits the enter key or clears the query (by clicking the (x) in a search control.<br />
I can’t find any references in WHATWG or W3C, and apparently, its upport Level is the Apple extension. I tested it work on the latest Chrome, but not on Firefox 9 or Opera 11.5.</p>

<p><img src="/assets/images/wp-content/uploads/2011/11/input-search.png" alt="input[type=search]" title="input-search" width="250" height="115" class="alignnone size-full wp-image-347" /></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"search"</span> <span class="na">name=</span><span class="s">"username"</span> <span class="na">placeholder=</span><span class="s">"Enter a Twitter username..."</span> <span class="na">results=</span><span class="s">"5"</span> <span class="na">id=</span><span class="s">"search"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">search</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">s</span><span class="p">.</span><span class="nf">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">search</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="nf">showTweets</span><span class="p">(</span><span class="nx">q</span><span class="p">);</span>
<span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
<span class="p">...</span>
</code></pre></div></div>

<p>The &lt;a href=”http://jsfiddle.net/girlie_mac/sfxYG/” target=_blank”&gt;code snippet and demo&lt;/a&gt; is at jsFiddle, too!</p>

<h2 id="references">References</h2>

<p>&lt;a href=”http://www.whatwg.org/specs/web-forms/current-work/” target=_blank”&gt;whatwg.org – Web Forms 2.0&lt;/a&gt;<br />
&lt;a href=”http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#handler-oninput” target=_blank”&gt;whatwg.org – oninput Event Handler&lt;/a&gt;<br />
&lt;a href=”http://whattheheadsaid.com/2010/09/effectively-detecting-user-input-in-javascript” target=_blank”&gt;Effectively detecting user input in JavaScript&lt;/a&gt;<br />
&lt;a href=”http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariHTMLRef/Articles/Attributes.html#//apple_ref/html/attribute/onsearc” target=_blank”&gt;Safari HTML Reference (onsearch)&lt;/a&gt;</p>

      <hr>

      <!-- Pagination -->
      <ul class="pagination">
	      
	        <li class="prev"><a href="/blog/2011/10/26/creating-usable-enyo-ui-buttons-and-interactive-dialogs/" rel="prev">&larr; Creating Usable Enyo UI &#8211; Buttons and Interactive Dialogs</a></li>
	      
	      
	        <li class="next"><a href="/blog/2011/11/28/html5-form-field-validation-with-css3/" rel="next">HTML5 Form Field Validation with CSS3 &rarr;</a></li>
	      
	  </ul>

      <hr style="visibility:hidden;">

      <!-- Categories -->
      
	  <ul class="categories">
	      <li><i class="icon-drawer"></i></li>
	      

	      
		    
		    	<li data-size="21"><a href="/categories/#HTML5">
		    		HTML5
		    	</a></li>
		    
		    	<li data-size="5"><a href="/categories/#JavaScript">
		    		JavaScript
		    	</a></li>
		    
		    	<li data-size="11"><a href="/categories/#UI/UX">
		    		UI/UX
		    	</a></li>
		    
		  
	      

	  </ul>
	  

	  <!-- Disqus -->
	      <div id="disqus_thread" style="margin-top: 3em"></div>
		    <script type="text/javascript">
		        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		        var disqus_shortname = 'laoazhang'; // required: replace example with your forum shortname
				

		        /* * * DON'T EDIT BELOW THIS LINE * * */
		        (function() {
		            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		        })();
		    </script>
		    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
		    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">

    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<footer>
  <small class="copyright">
    <span>&copy; 2024 laoazhang. Powered by <a href="http://jekyllrb.com">Jekyll</a> with modified <em>Minimal Mistakes</em> theme. Hosted on <a href="http://github.com">Github</a>.
  </small>
</footer>

<script src="https://laoazhang.cn/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-2635445-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<script>

</script>

</body>
</html>
